/**
 * Copyright (c) 2026, NVIDIA CORPORATION. All rights reserved.
 *
 * NVIDIA CORPORATION and its licensors retain all intellectual property
 * and proprietary rights in and to this software, related documentation
 * and any modifications thereto. Any use, reproduction, disclosure or
 * distribution of this software and related documentation without an express
 * license agreement from NVIDIA CORPORATION is strictly prohibited.
 */

/**
 * DataTable Styles
 *
 * CSS for the virtualized data table component.
 *
 * ## Performance Optimizations
 * - CSS containment: Isolates layout/paint to subtrees
 * - content-visibility: Skips rendering of off-screen content
 * - will-change: Hints for GPU compositing (used sparingly)
 * - contain-intrinsic-size: Prevents layout shifts
 */

/* Base table styles */
.data-table {
  --data-table-row-height: 48px;
  --data-table-header-height: 44px;
  --data-table-section-height: 36px;

  border-collapse: collapse;
  /* Containment: table size doesn't depend on content layout */
  contain: inline-size;
}

/* Virtualized table body - uses absolute positioning */
.data-table-body {
  position: relative;
  display: block;
  contain: layout style;
}

/* Virtualized row - absolutely positioned */
.data-table-row {
  position: absolute;
  top: 0;
  left: 0;
  display: flex;
  /* Row width expands with cell content (no width: 100%) */
  contain: layout style paint;
}

/* Header row */
.data-table-header {
  position: sticky;
  top: 0;
  z-index: 20;
  display: flex;
  background: var(--color-zinc-100);
}

:is(.dark .data-table-header) {
  background: var(--color-zinc-900);
}

/* Section header row (sticky within scroll) */
.data-table-section {
  position: sticky;
  z-index: 10;
  display: flex;
  background: var(--color-zinc-100);
}

:is(.dark .data-table-section) {
  background: var(--color-zinc-900);
}

/* Cell alignment helpers */
.data-table-cell {
  display: flex;
  align-items: center;
  padding: 0 1rem;
  overflow: hidden;
  /* Containment: cell layout is self-contained */
  contain: layout style;
  /* Text optimization */
  text-rendering: optimizeLegibility;
}

.data-table-cell--left {
  justify-content: flex-start;
  text-align: left;
}

.data-table-cell--right {
  justify-content: flex-end;
  text-align: right;
}

.data-table-cell--center {
  justify-content: center;
  text-align: center;
}

/* Row hover state */
.data-table-row--interactive {
  cursor: pointer;
  transition: background-color 150ms;
}

.data-table-row--interactive:hover {
  background: var(--color-zinc-50);
}

:is(.dark .data-table-row--interactive:hover) {
  background: var(--color-zinc-900);
}

/* Row selected state */
.data-table-row--selected {
  background: var(--color-zinc-100);
}

:is(.dark .data-table-row--selected) {
  background: var(--color-zinc-800);
}

/* Loading state */
.data-table-loading {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 200px;
  color: var(--color-zinc-500);
}

/* Empty state */
.data-table-empty {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 200px;
  color: var(--color-zinc-500);
}

/* Scroll container */
.data-table-scroll {
  overflow: auto;
  overscroll-behavior: contain;

  /* Reserve space for scrollbar to prevent layout shifts when it appears/disappears */
  scrollbar-gutter: stable;
}

/* =============================================================================
   Column Resize Styles
   ============================================================================= */

/* Header cells need relative positioning for resize handle */
.data-table th {
  position: relative;
}

/* Resize handle - positioned at right edge of header cell */
.resize-handle {
  position: absolute;
  right: 0;
  top: 0;
  bottom: 0;
  width: 8px;
  cursor: col-resize;
  user-select: none;
  touch-action: none;
  z-index: 1;
}

/* Visual indicator line */
.resize-handle::after {
  content: '';
  position: absolute;
  right: 3px;
  top: 25%;
  bottom: 25%;
  width: 2px;
  background: transparent;
  border-radius: 1px;
  transition: background-color 150ms;
}

/* Hover state */
.resize-handle:hover::after {
  background: var(--color-zinc-400);
}

:is(.dark .resize-handle:hover::after) {
  background: var(--color-zinc-500);
}

/* Active/dragging state */
.resize-handle:active::after,
.resize-handle.is-dragging::after {
  background: var(--color-zinc-500);
}

:is(.dark .resize-handle:active::after),
:is(.dark .resize-handle.is-dragging::after) {
  background: var(--color-zinc-400);
}

/* =============================================================================
   Scroll Lock During Resize
   ============================================================================= */

/* Applied to scroll container during resize */
.is-resizing {
  /* Prevent all scrolling during resize */
  overflow: hidden !important;

  /* Prevent overscroll behavior */
  overscroll-behavior: none;

  /* Prevent text selection */
  user-select: none;

  /* Prevent touch actions */
  touch-action: none;

  /* Performance: hint that columns are changing */
  --is-resizing: 1;
}

/* GPU acceleration hint for cells during resize */
.is-resizing .data-table-cell {
  /* Promote to compositor layer during resize */
  will-change: width;
}

/* Force col-resize cursor everywhere during resize */
.is-resizing,
.is-resizing * {
  cursor: col-resize !important;
}

/* Prevent pointer events on table content during resize */
.is-resizing .data-table tbody {
  pointer-events: none;
}
